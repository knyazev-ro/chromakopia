<?php

namespace Database\Factories;

use App\Models\Meeting;
use App\Models\User;
use App\Models\Agenda;
use Illuminate\Database\Eloquent\Factories\Factory;
use App\Enums\MeetingFormatType;
use App\Models\Branch;

class MeetingFactory extends Factory
{
    protected $model = Meeting::class;

    public function definition(): array
    {
        $start = $this->faker->dateTimeBetween('now', '+1 week');
        $end = (clone $start)->modify('+2 hours');

        $meetingNames = [
            'Совещание по квартальным отчетам',
            'Заседание правления компании',
            'Обсуждение стратегии развития',
            'Планерка отдела продаж',
            'Встреча по цифровой трансформации',
            'Семинар по новым технологиям',
            'Брифинг по маркетинговой кампании',
            'Круглый стол с инвесторами',
            'Срочное собрание по кризисной ситуации',
            'Заседание HR-комитета',
            'Стратегическая сессия на 2025 год',
            'Обсуждение реорганизации структуры',
            'Техническое совещание разработчиков',
            'Встреча по оптимизации бюджета',
            'Заседание комитета по аудиту',
            'Совещание по вопросам логистики',
            'Презентация нового продукта',
            'Обсуждение корпоративной культуры',
            'Заседание по кибербезопасности',
            'Собрание по итогам года',
            'Семинар по управлению проектами',
            'Встреча с ключевыми клиентами',
            'Заседание инновационного совета',
            'Совещание по кадровым вопросам',
            'Обсуждение слияния компаний',
            'Стратегическая сессия по экспансии',
            'Заседание по ESG-инициативам',
            'Планерка технического отдела',
            'Встреча по обновлению ПО',
            'Совещание по управлению рисками',
            'Заседание по ребрендингу',
            'Обсуждение новых рынков сбыта',
            'Семинар по повышению эффективности',
            'Встреча с поставщиками',
            'Заседание по корпоративной этике',
            'Совещание по внутренним коммуникациям',
            'Презентация финансовых результатов',
            'Обсуждение программы лояльности',
            'Заседание по охране труда',
            'Стратегическая сессия R&D',
            'Встреча по автоматизации процессов',
            'Совещание по юридическим вопросам',
            'Заседание по управлению талантами',
            'Обсуждение релокации офиса',
            'Семинар по работе с CRM',
            'Встреча по обновлению политик',
            'Заседание по международному расширению',
            'Совещание по клиентскому сервису',
            'Обсуждение программы обучения',
            'Итоговое собрание квартала'
        ];

        return [
            'name' => fake()->randomElement($meetingNames),
            'start_date' => $start,
            'end_date' => $end,
            'format_type' => $this->faker->randomElement([
                MeetingFormatType::IN_PERSON,
                MeetingFormatType::REMOTE,
                MeetingFormatType::HYBRID,
            ]),
            'chariman_id' => User::query()->inRandomOrder()->value('id'),
            'secretaty_id' => User::query()->inRandomOrder()->value('id'),
            'branch_id' => Branch::query()->inRandomOrder()->value('id'),
            'director_type' => fake()->numberBetween(1,2),
        ];
    }
}
